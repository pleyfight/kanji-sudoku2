@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --bg-primary: #fcfcfc;
    --bg-secondary: #f5f5f5;
    --bg-panel: #ffffff;
    --bg-panel-muted: #f2f2f2;
    --text-primary: #1a1a1a;
    --text-secondary: #4b5563;
    --text-muted: #8b949e;
    --accent: #990000;
    --accent-soft: #fff5f5;
    --accent-contrast: #ffffff;
    --accent-glow: rgba(153, 0, 0, 0.35);
    --accent-easy: #2563eb;
    --accent-medium: #16a34a;
    --accent-hard: #d97706;
    --accent-expert: #b91c1c;
    --error: #b91c1c;
    --success: #15803d;
    --border-subtle: rgba(26, 26, 26, 0.1);
    --border-strong: #1a1a1a;
    --border-primary: var(--border-strong);
    --grid-line: #1a1a1a;
    --cell-bg: #ffffff;
    --cell-hover: #f5f5f5;
    --cell-highlight: #fcf4f4;
    --cell-selected: #fff5f5;
    --cell-given: #1a1a1a;
    --cell-user: #1f2937;
    --shadow-panel: 0 18px 40px rgba(0, 0, 0, 0.08);
    --shadow-hard: 0 18px 40px rgba(0, 0, 0, 0.12);
    --page-pattern:
      radial-gradient(800px 400px at 10% 10%, rgba(153, 0, 0, 0.07), transparent 60%),
      radial-gradient(600px 400px at 90% 0%, rgba(0, 0, 0, 0.05), transparent 60%),
      radial-gradient(700px 500px at 90% 100%, rgba(153, 0, 0, 0.05), transparent 65%);
  }

  .dark {
    --bg-primary: #121212;
    --bg-secondary: #1a1a1a;
    --bg-panel: #1e1e1e;
    --bg-panel-muted: #151515;
    --text-primary: #f8f9fa;
    --text-secondary: #cbd5e1;
    --text-muted: #a0aec0;
    --accent: #d4af37;
    --accent-soft: #2d3748;
    --accent-contrast: #121212;
    --accent-glow: rgba(212, 175, 55, 0.35);
    --accent-easy: #60a5fa;
    --accent-medium: #4ade80;
    --accent-hard: #fbbf24;
    --accent-expert: #f87171;
    --error: #f87171;
    --success: #4ade80;
    --border-subtle: rgba(248, 249, 250, 0.12);
    --border-strong: #f8f9fa;
    --border-primary: var(--border-strong);
    --grid-line: #f8f9fa;
    --cell-bg: #121212;
    --cell-hover: #1a202c;
    --cell-highlight: #1a202c;
    --cell-selected: #2d3748;
    --cell-given: #a0aec0;
    --cell-user: #f8f9fa;
    --shadow-panel: 0 20px 50px rgba(0, 0, 0, 0.5);
    --shadow-hard: 0 20px 50px rgba(0, 0, 0, 0.6);
    --page-pattern:
      radial-gradient(800px 400px at 10% 10%, rgba(212, 175, 55, 0.08), transparent 60%),
      radial-gradient(600px 400px at 90% 0%, rgba(248, 249, 250, 0.04), transparent 60%),
      radial-gradient(700px 500px at 90% 100%, rgba(212, 175, 55, 0.08), transparent 65%);
  }

  body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
    font-family: 'Inter', 'Segoe UI', sans-serif;
    background-image: var(--page-pattern);
    background-attachment: fixed;
    min-height: 100vh;
  }
}

@layer components {
  .kanji-cell {
    font-family: 'Noto Serif JP', 'Hiragino Mincho ProN', serif;
    font-weight: 600;
  }

  .surface-panel {
    background: var(--bg-panel);
    border: 1px solid var(--border-subtle);
    box-shadow: var(--shadow-panel);
  }

  .surface-muted {
    background: var(--bg-panel-muted);
    border: 1px solid var(--border-subtle);
  }

  .tab-active {
    border-bottom: 2px solid var(--accent);
    color: var(--accent);
  }

  .tab-inactive {
    border-bottom: 2px solid transparent;
    color: var(--text-muted);
  }

  .tab-inactive:hover {
    color: var(--text-primary);
  }

  .action-btn {
    padding: 0.5rem 1rem;
    font-size: 0.625rem;
    font-weight: 700;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    border-radius: 0.25rem;
    border: 1px solid var(--border-subtle);
    color: var(--text-primary);
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
  }

  .action-btn:hover {
    background: color-mix(in srgb, var(--accent) 8%, transparent);
    border-color: color-mix(in srgb, var(--accent) 30%, transparent);
  }

  .kanji-key {
    aspect-ratio: 1 / 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    border-radius: 0.25rem;
    border: 1px solid var(--border-subtle);
    background: var(--bg-panel);
    color: var(--text-primary);
    transition: transform 0.2s ease, border-color 0.2s ease, color 0.2s ease, background-color 0.2s ease;
  }

  .kanji-key:hover {
    border-color: color-mix(in srgb, var(--accent) 35%, transparent);
    color: var(--accent);
    background: var(--bg-secondary);
  }

  .sidebar-section {
    padding: 1.5rem 0;
    border-bottom: 1px solid var(--border-subtle);
  }

  .sidebar-section:last-child {
    border-bottom: 0;
  }

  .sudoku-grid {
    display: grid;
    grid-template-columns: repeat(9, minmax(0, 1fr));
    grid-template-rows: repeat(9, minmax(0, 1fr));
    border: 3px solid var(--grid-line);
    background-color: var(--grid-line);
    gap: 1px;
  }

  .sudoku-cell {
    background: var(--cell-bg);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .cell-selected {
    background: var(--cell-selected);
    outline: 3px solid var(--accent);
    z-index: 5;
  }

  .cell-highlight {
    background: var(--cell-highlight);
  }

  .cell-invalid {
    background: color-mix(in srgb, var(--error) 10%, transparent);
  }

  .cell-given {
    color: var(--cell-given);
  }

  .cell-user {
    color: var(--cell-user);
    font-weight: 700;
  }
}

* {
  transition-property: background-color, border-color, color, box-shadow, transform;
  transition-duration: 0.2s;
  transition-timing-function: ease;
}

*:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

::selection {
  background-color: var(--accent);
  color: var(--accent-contrast);
}
